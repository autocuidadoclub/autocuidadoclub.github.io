<!DOCTYPE html>

<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AutoCuidado Home ‚Ä¢ Cat√°logo ESAL</title>
  <link rel="stylesheet" href="../styles.css" />
  <style>
    /* Global Styles for the Page (Simplified) */
    .catalog-container {
      max-width: 900px;
      margin: 2rem auto;
      padding: 1rem;
      text-align: center;
    }
    .catalog-title {
      font-size: 2rem;
      color: #002b5c; /* your blue color */
      margin-bottom: 1rem;
    }
    .catalog-description {
      font-size: 1.1rem;
      color: #444;
      margin-bottom: 1.5rem;
    }
    .catalog-buttons {
      margin-bottom: 2rem;
    }
    .catalog-buttons a {
      display: inline-block;
      padding: 0.75rem 1.5rem;
      margin: 0 0.5rem;
      background-color: #ff6600; /* your orange accent */
      color: white;
      border-radius: 4px;
      text-decoration: none;
      font-weight: bold;
      transition: background-color 0.3s;
    }
    .catalog-buttons a:hover {
      background-color: #e65c00;
    }
    .catalog-embed {
      width: 100%;
      height: 700px;
      border: none;
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      margin-bottom: 2rem;
    }
    /* Styles for the Order Box */
    .box {
      border: 1px solid #ddd;
      padding: 20px;
      margin: 20px auto;
      max-width: 500px; /* Constrain the form width */
      border-radius: 8px;
      text-align: left;
    }
    .box h4 {
        border-bottom: 1px solid #eee;
        padding-bottom: 5px;
        margin-top: 20px;
        margin-bottom: 10px;
        color: #002b5c;
    }
    .box label {
        display: block;
        margin-top: 10px;
        font-weight: bold;
    }
    .box input[type="number"], .box input[type="text"], .box select {
        width: 100%;
        padding: 8px;
        margin-top: 5px;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
    }
    .box .btn {
        width: 100%;
        padding: 15px;
        margin-top: 20px;
        background-color: #4CAF50; /* Green WhatsApp color */
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 1.1rem;
        cursor: pointer;
    }
  </style>


    <title>AutoCuidado Club - Inicio</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">

    <!-- Push Notification Script -->
    <script>
    (function(w, d) {
        w.PushEngage = w.PushEngage || [];
        w._peq = w._peq || [];
        PushEngage.push(['init', {
            appId: '2f304881-8eee-4a7a-a487-6f231bd85ec7'  // Replace with your PushEngage appId
        }]);

        var e = d.createElement('script');
        e.src = 'https://clientcdn.pushengage.com/sdks/pushengage-web-sdk.js';
        e.async = true;
        e.type = 'text/javascript';
        d.head.appendChild(e);
    })(window, document);
    </script>
    
       
</head>

<body>
  <!-- Navigation -->
<nav class="navbar">
    <ul class="nav-links">
        <a href="#">Divisiones</a>
  <ul class="dropdown-menu">
    <li><a href="/ice">üßä AutoCuidado ICE</a></li>
    <li><a href="index.html" target="_blank">üöó AutoCuidado Club</a></li>
  </ul>
</li>
    </ul>
    <div class="logo-container">
        <img src="logo.jpg" alt="AutoCuidado Club Logo" class="logo">
    </div>
</nav>

    

<!-- Header -->
<header style="background: linear-gradient(135deg, #002F6C, #003B80); padding: 60px 20px; text-align: center; border-bottom: 4px solid #FF6600;">
    <div class="header-text">
        <h1 style="color: white; font-size: 2.5em; margin-bottom: 15px;">Bienvenido a AutoCuidado HOME</h1>
        <p style="color: white; font-size: 1.2em;">Tu vales oro. Cuidamos tu entorno, tu salud y tu productividad, porque autocuidarte tambi√©n es cuidar tu hogar.</p>
    </div>
</header>


<body>
  <header>
    <nav>
      </nav>
  </header>

  <div class="catalog-container">
    <h1 class="catalog-title">Cat√°logo AutoCuidado Home ‚Ä¢ ESAL</h1>
    <p class="catalog-description">
      Descubre nuestra l√≠nea de productos de limpieza, desinfectantes, jabones, repelentes y m√°s.
      Todo lo que necesitas para el cuidado del hogar con la calidad ESAL.
    </p>
    <div class="catalog-buttons">
      <a href="/esalcatalog.pdf" target="_blank" download>üì• Descargar PDF</a>
      <a href="/">‚Üê Volver a AutoCuidado Club</a>
    </div>
    <iframe
      src="/esalcatalog.pdf"
      class="catalog-embed"
      allowfullscreen
    ></iframe>

<div class="box">
    <h2>üìã Pedido R√°pido ESAL - AutoCuidado Home</h2>
    <p class="catalog-description">Selecciona la cantidad de cada producto y presentaci√≥n para calcular tu total al instante.</p>

    <div id="product-inputs-container">
        </div>

    <div class="summary-and-payment">
        <h3>Total: $<span id="totalAmount">0.00</span></h3>
        <p id="promoMessage" style="color: green; font-weight: bold;"></p>

        <label for="paymentMethod">M√©todo de Pago:</label>
        <select id="paymentMethod" required>
            <option value="" disabled selected>Selecciona un m√©todo</option>
            <option value="Transferencia bancaria">Transferencia bancaria</option>
            <option value="Tarjeta">Tarjeta</option>
            <option value="Bitcoin">Bitcoin</option>
            <option value="Banco Agr√≠cola Tasa Cero">Banco Agr√≠cola Tasa Cero (desde $50)</option>
        </select>
    </div>

    <div class="delivery-info">
        <h3>Datos de Entrega</h3>
        <label for="name">Nombre de quien recibe:</label>
        <input type="text" id="name" required>

        <label for="municipality">Municipio:</label>
        <input type="text" id="municipality" placeholder="Ej: Santa Ana, San Miguel" required>
        
        <label for="location">Ubicaci√≥n exacta para entrega:</label>
        <input type="text" id="location" placeholder="Ej: Calle Principal, pasaje, casa #15" required>
    </div>

    <button class="btn" onclick="sendOrder()">Enviar Pedido por WhatsApp</button>
</div>

<style>
    /* ... (Mantener estilos de .box, .delivery-info, .summary-and-payment, etc.) ... */

    .order-table-container {
        overflow-x: auto;
        margin-bottom: 30px; /* M√°s espacio entre categor√≠as */
    }
    .order-table-container table {
        width: 100%;
        border-collapse: collapse;
    }
    .order-table-container th, .order-table-container td {
        padding: 10px 5px; /* Ajuste para celdas m√°s peque√±as */
        border: 1px solid #eee;
        text-align: left;
    }
    .order-table-container thead th {
        background-color: #f0f0f0;
        font-weight: bold;
        color: #002b5c;
        font-size: 0.85em; /* Fuente m√°s peque√±a para encabezados de columna */
        vertical-align: middle;
        text-align: center;
    }
    .product-group-header {
        background-color: #e6f7ff;
        font-weight: bold;
        color: #002b5c;
        text-align: center;
    }
    .vertical-category-header {
        background-color: #e6f7ff;
        font-weight: bold;
        color: #002b5c;
    }
    .text-center {
        text-align: center;
    }
    .product-qty-input {
        width: 60px;
        text-align: center;
        padding: 5px;
        border-radius: 4px;
        border: 1px solid #ccc;
        font-size: 0.9em;
    }
    /* Estilo para las filas de aroma en la matriz */
    .matrix-scent-cell {
        font-weight: 500;
        color: #333;
        width: 150px;
        text-align: left !important;
    }
    .matrix-size-cell {
        width: 90px;
        text-align: center;
    }
</style>
    
    
    <footer>
    </footer>


  <div id="cta-install-bar" style="display:none;">
      </div>
  
  <div id="feedbackModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:9999; align-items:center; justify-content:center;">
      </div>
  
  <button id="reopen-cta-btn" style="display: none; position: fixed; bottom: 20px; right: 20px; /* ... rest of your styles ... */">
      üì≤ Abrir men√∫
  </button>

<script>
    // --- DATOS DE PRODUCTOS ESAL (Completo) ---
    const ESAL_PRODUCTS = {
        "Alcohol Gel": [
            { id: "ag_galon_mango", size: "Gal√≥n", scent: "Mango", price: 13.50 },
            { id: "ag_galon_manzana", size: "Gal√≥n", scent: "Manzana Verde", price: 13.50 },
            { id: "ag_galon_maracuya", size: "Gal√≥n", scent: "Maracuy√°", price: 13.50 },
            { id: "ag_galon_sandia", size: "Gal√≥n", scent: "Sand√≠a", price: 13.50 },
            { id: "ag_galon_sinfrag", size: "Gal√≥n", scent: "Sin Fragancia", price: 13.50 },
            { id: "ag_500ml_mango", size: "500 mL", scent: "Mango", price: 4.50 },
            { id: "ag_500ml_manzana", size: "500 mL", scent: "Manzana Verde", price: 4.50 },
            { id: "ag_500ml_maracuya", size: "500 mL", scent: "Maracuy√°", price: 4.50 },
            { id: "ag_500ml_sandia", size: "500 mL", scent: "Sand√≠a", price: 4.50 },
            { id: "ag_500ml_sinfrag", size: "500 mL", scent: "Sin Fragancia", price: 4.50 },
            { id: "ag_120ml_mango", size: "120 mL", scent: "Mango", price: 1.75 },
            { id: "ag_120ml_manzana", size: "120 mL", scent: "Manzana Verde", price: 1.75 },
            { id: "ag_120ml_maracuya", size: "120 mL", scent: "Maracuy√°", price: 1.75 },
            { id: "ag_120ml_sandia", size: "120 mL", scent: "Sand√≠a", price: 1.75 },
            { id: "ag_120ml_sinfrag", size: "120 mL", scent: "Sin Fragancia", price: 1.75 },
            { id: "ag_30ml_mango", size: "30 mL", scent: "Mango", price: 1.00 },
            { id: "ag_30ml_manzana", size: "30 mL", scent: "Manzana Verde", price: 1.00 },
            { id: "ag_30ml_maracuya", size: "30 mL", scent: "Maracuy√°", price: 1.00 },
            { id: "ag_30ml_sandia", size: "30 mL", scent: "Sand√≠a", price: 1.00 },
            { id: "ag_30ml_sinfrag", size: "30 mL", scent: "Sin Fragancia", price: 1.00 },
            { id: "ag_30ml_silicon_sin", size: "30 mL", scent: "Sin Fragancia (Sin Silic√≥n)", price: 1.00 }
        ],
        "Alcohol L√≠quido": [
            { id: "al_galon_90", size: "Gal√≥n", scent: "90%", price: 12.00, display: "Gal√≥n 90%" },
            { id: "al_galon_70", size: "Gal√≥n", scent: "70%", price: 10.50, display: "Gal√≥n 70%" },
            { id: "al_spray_70", size: "120 mL Spray", scent: "70%", price: 1.75, display: "120 mL Spray 70%" }
        ],
        "Desinfectante Uso Directo (Piso)": [
            { id: "dd_galon_verde", size: "Gal√≥n", scent: "Manzana Verde", price: 3.25 },
            { id: "dd_galon_sin", size: "Gal√≥n", scent: "Sin Fragancia", price: 3.25 },
            { id: "dd_galon_lavanda", size: "Gal√≥n", scent: "Lavanda", price: 3.25 },
            { id: "dd_galon_maracuya", size: "Gal√≥n", scent: "Maracuy√°", price: 3.25 },
            { id: "dd_galon_limon", size: "Gal√≥n", scent: "Lim√≥n", price: 3.25 },
            { id: "dd_galon_citronela", size: "Gal√≥n", scent: "Citronela", price: 3.25 }
        ],
        "Desinfectante Concentrado (Piso)": [
            { id: "dc_galon_verde", size: "Gal√≥n", scent: "Manzana Verde", price: 4.00 },
            { id: "dc_galon_sin", size: "Gal√≥n", scent: "Sin Fragancia", price: 4.00 },
            { id: "dc_galon_lavanda", size: "Gal√≥n", scent: "Lavanda", price: 4.00 },
            { id: "dc_galon_maracuya", size: "Gal√≥n", scent: "Maracuy√°", price: 4.00 },
            { id: "dc_galon_limon", size: "Gal√≥n", scent: "Lim√≥n", price: 4.00 },
            { id: "dc_galon_citronela", size: "Gal√≥n", scent: "Citronela", price: 4.00 }
        ],
        "Lej√≠a": [
            { id: "lejia_4", size: "Gal√≥n", scent: "4%", price: 2.50, display: "Gal√≥n 4%" },
            { id: "lejia_6", size: "Gal√≥n", scent: "6%", price: 3.00, display: "Gal√≥n 6%" }
        ],
        "Jab√≥n L√≠quido para Manos": [
            { id: "jl_galon_verde", size: "Gal√≥n", scent: "Manzana Verde", price: 4.00 },
            { id: "jl_galon_cereza", size: "Gal√≥n", scent: "Cereza", price: 4.00 },
            { id: "jl_galon_fresa", size: "Gal√≥n", scent: "Fresa", price: 4.00 },
            { id: "jl_galon_durazno", size: "Gal√≥n", scent: "Durazno", price: 4.00 },
            { id: "jl_galon_chicle", size: "Gal√≥n", scent: "Chicle", price: 4.00 },
            { id: "jl_500ml_verde", size: "500 mL", scent: "Manzana Verde", price: 1.75 },
            { id: "jl_500ml_cereza", size: "500 mL", scent: "Cereza", price: 1.75 },
            { id: "jl_500ml_fresa", size: "500 mL", scent: "Fresa", price: 1.75 },
            { id: "jl_500ml_durazno", size: "500 mL", scent: "Durazno", price: 1.75 },
            { id: "jl_500ml_chicle", size: "500 mL", scent: "Chicle", price: 1.75 }
        ],
        "Repelente de Insectos": [
            { id: "repelente_120ml", size: "120 mL Spray", scent: "Citronela", price: 3.00, display: "120 mL Spray Citronela" }
        ]
    };

    const matrixCategories = ["Alcohol Gel", "Jab√≥n L√≠quido para Manos"];

    // --- Funciones Auxiliares para Generar HTML de la Tabla ---

    function generateInput(product, category) {
        // Genera el input de cantidad con data-price y data-name
        const productName = `${category}: ${product.size} (${product.scent})`;
        const displayPrice = product.price.toFixed(2);

        return product
            ? `<input 
                type="number" 
                class="product-qty-input"
                id="${product.id}" 
                min="0" 
                value="0" 
                oninput="updateTotal()" 
                data-price="${displayPrice}"
                data-name="${productName} ($${displayPrice})"
            >`
            : '';
    }

    function generateMatrixCategoryHtml(category, products) {
        const sizes = category === "Alcohol Gel" 
            ? ["Gal√≥n", "500 mL", "120 mL", "30 mL"] 
            : ["Gal√≥n", "500 mL"];
            
        // Usar un Set para obtener solo aromas √∫nicos
        const scents = [...new Set(products.map(p => p.scent))].filter(s => s !== "Sin Fragancia (Sin Silic√≥n)").sort();
        
        // Mapear productos por aroma y tama√±o para acceso r√°pido
        const productMap = {};
        products.forEach(p => {
            if (!productMap[p.scent]) productMap[p.scent] = {};
            productMap[p.scent][p.size] = p;
        });

        let html = `<div class="order-table-container">
            <table>
                <thead>
                    <tr class="product-group-header"><th colspan="${sizes.length + 1}">üß¥ ${category}</th></tr>
                    <tr>
                        <th class="matrix-scent-cell">Aroma/Fragancia</th>`;
        
        sizes.forEach(size => {
            // Obtener el precio base para mostrarlo en el encabezado de la columna
            const exampleProduct = products.find(p => p.size === size);
            const priceText = exampleProduct ? `($${exampleProduct.price.toFixed(2)})` : '';
            html += `<th class="matrix-size-cell">${size}<br>${priceText}</th>`;
        });
        html += `</tr></thead><tbody>`;

        // Generar filas por aroma
        scents.forEach(scent => {
            html += `<tr><td class="matrix-scent-cell">${scent}</td>`;
            sizes.forEach(size => {
                const product = productMap[scent] ? productMap[scent][size] : null;
                const content = product ? generateInput(product, category) : '‚Äî';
                html += `<td class="matrix-size-cell">${content}</td>`;
            });
            html += `</tr>`;
        });

        // Caso especial: 30 mL Sin Silic√≥n (solo en Alcohol Gel)
        if (category === "Alcohol Gel") {
            const specialProduct = products.find(p => p.scent === "Sin Fragancia (Sin Silic√≥n)");
            if (specialProduct) {
                const content = generateInput(specialProduct, category);
                html += `<tr>
                    <td class="matrix-scent-cell">${specialProduct.scent}</td>
                    <td>‚Äî</td><td>‚Äî</td><td>‚Äî</td>
                    <td class="matrix-size-cell">${content}</td>
                </tr>`;
            }
        }

        html += `</tbody></table></div>`;
        return html;
    }

    function generateVerticalCategoryHtml(category, products) {
        // Usado para Alcohol L√≠quido, Desinfectante, Lej√≠a y Repelente
        let html = `<div class="order-table-container">
            <table>
                <thead>
                    <tr class="product-group-header"><th colspan="3">üß¥ ${category}</th></tr>
                    <tr>
                        <th>Producto y Presentaci√≥n</th>
                        <th class="text-center">Precio Unitario</th>
                        <th class="text-center">Cantidad</th>
                    </tr>
                </thead>
                <tbody>`;
        
        products.forEach(product => {
            const labelText = product.display || `${product.size} (${product.scent})`;
            const content = generateInput(product, category);

            html += `<tr>
                        <td>${labelText}</td>
                        <td class="text-center">$${product.price.toFixed(2)}</td>
                        <td class="text-center">${content}</td>
                    </tr>`;
        });

        html += `</tbody></table></div>`;
        return html;
    }

    // --- Funci√≥n Principal de Generaci√≥n ---
    (function generateFormTable() {
        const container = document.getElementById('product-inputs-container');
        let fullHtml = '';

        for (const category in ESAL_PRODUCTS) {
            const products = ESAL_PRODUCTS[category];

            if (matrixCategories.includes(category)) {
                fullHtml += generateMatrixCategoryHtml(category, products);
            } else {
                fullHtml += generateVerticalCategoryHtml(category, products);
            }
        }
        container.innerHTML = fullHtml;
    })();

    // --- Funciones de L√≥gica (sin cambios) ---

    function updateTotal() {
        let total = 0;
        // Selecciona todos los inputs de cantidad en el contenedor
        const inputs = document.querySelectorAll('#product-inputs-container input[type="number"]');

        inputs.forEach(input => {
            const qty = parseInt(input.value) || 0;
            const price = parseFloat(input.getAttribute('data-price'));
            total += qty * price;
        });

        document.getElementById("totalAmount").textContent = total.toFixed(2);

        const promo = document.getElementById("promoMessage");
        promo.textContent = total >= 50 ? "‚úÖ ¬°Tu pedido aplica para Tasa Cero Banco Agr√≠cola!" : "";
    }

    function sendOrder() {
        const inputs = document.querySelectorAll('#product-inputs-container input[type="number"]');
        let totalQty = 0;
        let orderDetails = "";

        inputs.forEach(input => {
            const qty = parseInt(input.value) || 0;
            if (qty > 0) {
                const name = input.getAttribute('data-name');
                orderDetails += `* ${qty}x ${name}\n`;
                totalQty += qty;
            }
        });

        const location = document.getElementById("location").value.trim();
        const municipality = document.getElementById("municipality").value.trim();
        const name = document.getElementById("name").value.trim();
        const paymentMethod = document.getElementById("paymentMethod").value;
        const total = document.getElementById("totalAmount").textContent;
        const whatsappNumber = "50375704428";

        // Validaci√≥n
        if (totalQty === 0) {
            alert("‚ö†Ô∏è Por favor, selecciona al menos un producto.");
            return;
        }
        if (!location || !municipality || !name || paymentMethod === "") {
            alert("‚ö†Ô∏è Por favor, completa todos los campos de entrega y selecciona un M√©todo de Pago.");
            return;
        }

        let message = `*ORDEN DE PRODUCTOS ESAL - ${new Date().toLocaleDateString('es-SV')}*\n\n`;
        message += `*PRODUCTOS DETALLE:*\n${orderDetails}\n`;
        message += `*TOTAL ESTIMADO: $${total}*\n`;
        message += `*M√âTODO DE PAGO:* ${paymentMethod}\n\n`;
        message += `*DATOS DE ENTREGA:*\nNombre: ${name}\nMunicipio: ${municipality}\nUbicaci√≥n: ${location}`;

        window.open(`https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`, "_blank");
    }

    // Las funciones de PWA/Modal deben ir aqu√≠ si las quieres mantener:
    // let deferredPrompt = null;
    // window.addEventListener('beforeinstallprompt', (e) => { /* ... */ });
    // document.getElementById('how-to-install-btn').addEventListener('click', async () => { /* ... */ });
    // function openFeedbackModal() { /* ... */ }
    // function closeFeedbackModal() { /* ... */ }
    // function startVoiceInput() { /* ... */ }
    // document.getElementById('voiceFeedbackForm').onsubmit = function (e) { /* ... */ };
    // function closeCtaInstallBar() { /* ... */ }
    // document.getElementById('reopen-cta-btn').addEventListener('click', () => { /* ... */ });
</script>

    
  </body>
</html>
