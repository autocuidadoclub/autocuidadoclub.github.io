document.addEventListener("DOMContentLoaded", function () {
    if (window._env_ && window._env_.FIREBASE_API_KEY) {
        const firebaseConfig = {
            apiKey: window._env_.FIREBASE_API_KEY,
            authDomain: window._env_.FIREBASE_AUTH_DOMAIN,
            projectId: window._env_.FIREBASE_PROJECT_ID,
            storageBucket: window._env_.FIREBASE_STORAGE_BUCKET,
            messagingSenderId: window._env_.FIREBASE_MESSAGING_SENDER_ID,
            appId: window._env_.FIREBASE_APP_ID
        };

        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
            console.log("✅ Firebase initialized correctly!");
        } else {
            console.log("ℹ️ Firebase already initialized.");
        }

        // Now, initialize Firestore and Auth
        const db = firebase.firestore();
        const auth = firebase.auth();
        console.log("✅ Firestore and Auth initialized!");
    } else {
        console.error("❌ Error: Firebase secrets not loaded. Check env.js.");
    }
});
